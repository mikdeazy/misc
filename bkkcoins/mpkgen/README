mpkgen is a set of scripts for generating Bitcoin addresses from Master Public Key (MPK) for Electrum wallets.

There are 4 separate things here.

mpkgen - Python script, takes mpk and seq number to generate an address.

c/mpkgen.c -  C program using openssl (crypto) library that generates addresses from mpk and seq number.

php/mpkgen.php - PHP script that does the same as the Python one above. This uses the phpecc library available separately at git://github.com/mdanter/phpecc.git

php/extension/mpk.c - PHP extension module written in C that uses openssl (crypto) library. To use this one you add a line to your php.ini file to load the extension.

extension=mpkgen.so

And then restart PHP and use the GenAddress() function in your scripts. eg.

GenAddress(f3e7ee745a7ff4acb5500d2bd40a2eb9cb24a66f6421f901c15665bd7b6aa5fca39a65a27774e4d250c98e61758e0a937522c5a8320be1681ff6bf770c2de51a, 4);

See the test.php example. 

To build this extension you would follow normal PHP building steps in the extension source directory. You will need the php5-dev package for dev tools.

phpize
./configure
sudo make install

In all cases when generating addresses where you intend to receive funds into an Electrum wallet you will want to be aware of the gap limit setting in Electrum. This controls how many extra addresses are generated in the wallet. When using these scripts they will generate addresses that may not be in your wallet. The way to ensure that addresses are also in the wallet and so can receive funds is to set a high gap limit value. It should be higher than the number of addresses generated by your script that are discarded / unused because Electrum uses transactions to detect used addresses and decide how many extra to generate.

Another way to use these scripts is without Electrum by storing each seq,address in a database and then monitoring for transactions independently. This would require storing the sequnce index so that later keys can be generated for each address (offline probably). Given the Electrum seed and sequence numbers it's possible to generate the Master Private Key and any private keys for these addresses.
